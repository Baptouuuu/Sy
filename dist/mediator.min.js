/*! sy#1.1.1 - 2014-12-24 */
function namespace(a){var b=null,c=this;if("string"==typeof a)b=a.split(".");else{if(!(a instanceof Array&&a.length>0))return c;b=a}return c[b[0]]=c[b[0]]||{},a=b.shift(),namespace.call(c[a],b)}function objectSetter(a,b){var c="",d="",e=this,f=a.lastIndexOf(".");f>=0?(d=a.substr(f+1),c=a.substr(0,f),e=namespace.call(e,c)):d=a,e[d]=b}function objectGetter(a){var b=null,c=this;if("string"==typeof a){if(b=a.split("."),1===b.length)return c[a]}else{if(!(a instanceof Array&&a.length>1))return a instanceof Array&&1===a.length?c[a[0]]:void 0;b=a}return a=b.shift(),objectGetter.call(c[a],b)}function capitalize(a){return a.substr(0,1).toUpperCase()+a.substr(1)}function reflectedObjectGetter(a){var b=null,c=this;if("string"==typeof a){if(b=a.split("."),1===b.length)return getReflectedValue.call(c,a)}else{if(!(a instanceof Array&&a.length>1))return a instanceof Array&&1===a.length?getReflectedValue.call(c,a[0]):void 0;b=a}return a=b.shift(),reflectedObjectGetter.call(getReflectedValue.call(c,a),b)}function getReflectedValue(a){var b=new ReflectionObject(this);return b.hasMethod("get"+capitalize(a))?b.getMethod("get"+capitalize(a)).call():b.hasMethod("get")?b.getMethod("get").call(a):b.hasProperty(a)?b.getProperty(a).getValue():void 0}namespace("Sy.Lib"),Sy.Lib.Mediator=function(){this.channels={},this.generator=null,this.logger=null},Sy.Lib.Mediator.prototype=Object.create(Object.prototype,{subscribe:{value:function(a){var a=a||{},b=null;return void 0===a.priority&&(a.priority=1),void 0===this.channels[a.channel]&&(b=new Sy.Lib.MediatorChannel(a.channel),b.setGenerator(this.generator),this.logger&&b.setLogger(this.logger),this.channels[a.channel]=b),this.channels[a.channel].add(a.fn,a.context,a.priority,a.async,a.bubbles)}},remove:{value:function(a,b){return void 0!==this.channels[a]&&this.channels[a].remove(b),this}},publish:{value:function(){if(0===arguments.length)return this;var a=Array.prototype.slice.call(arguments,0,1)[0],b=Array.prototype.slice.call(arguments,1);return void 0!==this.channels[a]&&this.channels[a].publish(b),this}},pause:{value:function(a,b){return void 0!==this.channels[a]&&(this.channels[a].stopped=!0,b&&this.channels[a].pause(b)),this}},unpause:{value:function(a,b){return void 0!==this.channels[a]&&(this.channels[a].stopped=!1,b&&this.channels[a].unpause(b)),this}},paused:{value:function(a){return void 0!==this.channels[a]?this.channels[a].stopped:void 0}},setGenerator:{value:function(a){if(!(a instanceof Sy.Lib.Generator.Interface))throw new TypeError("Invalid generator");return this.generator=a,this}},setLogger:{value:function(a){if(!(a instanceof Sy.Lib.Logger.Interface))throw new TypeError("Invalid logger");return this.logger=a,this}}}),Sy.Lib.MediatorChannel=function(a){this.name=a||"",this.stopped=!1,this.subscribers={},this.generator=null,this.logger=null},Sy.Lib.MediatorChannel.prototype=Object.create(Object.prototype,{add:{value:function(a,b,c,d,e){var f=this.generator.generate();return this.subscribers[f]={fn:a,context:b||window,priority:c||1,async:!!d,bubbles:!!e,stopped:!1},f}},remove:{value:function(a){return delete this.subscribers[a],this}},publish:{value:function(a){var a=a||[];if(this.stopped===!1){var b=[];for(var c in this.subscribers)this.subscribers.hasOwnProperty(c)&&this.subscribers[c].stopped===!1&&b.push(this.subscribers[c]);b.sort(function(a,b){return a.priority-b.priority});for(var d=0,e=b.length;e>d;d++)try{var f=b[d];f.async===!0?setTimeout(this.subscriberCall,0,this,f.fn,f.context,a):this.subscriberCall(this,f.fn,f.context,a)}catch(g){if(this.logger&&this.logger.error(g.message,g),f.bubbles===!0)throw g}}return this}},setGenerator:{value:function(a){if(!(a instanceof Sy.Lib.Generator.Interface))throw new TypeError("Invalid generator");return this.generator=a,this}},setLogger:{value:function(a){if(!(a instanceof Sy.Lib.Logger.Interface))throw new TypeError("Invalid logger");return this.logger=a,this}},subscriberCall:{value:function(a,b,c,d){b.apply(c,d)}},pause:{value:function(a){return this.subscribers[a]&&(this.subscribers[a].stopped=!0),this}},unpause:{value:function(a){return this.subscribers[a]&&(this.subscribers[a].stopped=!1),this}}}),namespace("Sy.Lib.Generator"),Sy.Lib.Generator.Interface=function(){},Sy.Lib.Generator.Interface.prototype=Object.create(Object.prototype,{generate:{value:function(){}}}),namespace("Sy.Lib.Generator"),Sy.Lib.Generator.UUID=function(){},Sy.Lib.Generator.UUID.prototype=Object.create(Sy.Lib.Generator.Interface.prototype,{s4:{value:function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}},generate:{value:function(){return this.s4()+this.s4()+"-"+this.s4()+"-"+this.s4()+"-"+this.s4()+"-"+this.s4()+this.s4()+this.s4()}}}),namespace("Sy.Lib.Logger"),Sy.Lib.Logger.Interface=function(){},Sy.Lib.Logger.Interface.prototype=Object.create(Object.prototype,{LOG:{value:"log",writable:!1},DEBUG:{value:"debug",writable:!1},ERROR:{value:"error",writable:!1},INFO:{value:"info",writable:!1},setName:{value:function(){return this}},log:{value:function(){return this}},debug:{value:function(){return this}},error:{value:function(){return this}},info:{value:function(){return this}},setHandler:{value:function(){return this}},isHandlingLevel:{value:function(){}},removeHandler:{value:function(){}},lock:{value:function(){}}}),namespace("Sy.Lib.Logger.Handler"),Sy.Lib.Logger.Handler.Interface=function(){},Sy.Lib.Logger.Handler.Interface.prototype=Object.create(Object.prototype,{handle:{value:function(){}},isHandling:{value:function(){}}}),namespace("Sy.Lib.Logger.Handler"),Sy.Lib.Logger.Handler.Console=function(a){this.level=null,void 0!==a&&this.setLevel(a)},Sy.Lib.Logger.Handler.Console.prototype=Object.create(Sy.Lib.Logger.Handler.Interface.prototype,{setLevel:{value:function(a){if(!this.checkLevel(a))throw new TypeError("Unknown logger level");return this.level=a,this}},checkLevel:{value:function(a){return a.toUpperCase()in Sy.Lib.Logger.Interface.prototype?!0:!1}},isHandling:{value:function(a){return a===this.level?!0:!1}},handle:{value:function(a,b,c,d){if(this.isHandling(b)&&"console"in window){var e="["+moment().format("YYYY-M-D hh:mm:ss")+"]",f=d||[];c=c||"",e+=" "+a+"."+b.toUpperCase(),e+=" "+c.toString(),console[b](e,f)}return this}}}),namespace("Sy.Lib.Logger"),Sy.Lib.Logger.CoreLogger=function(a){this.name="",this.handlers={},this.setName(a)},Sy.Lib.Logger.CoreLogger.prototype=Object.create(Sy.Lib.Logger.Interface.prototype,{setName:{value:function(a){return this.name=a||"null",this}},setHandler:{value:function(a,b){return a instanceof Sy.Lib.Logger.Handler.Interface&&b.toUpperCase()in this&&(this.handlers[b]=a),this}},isHandlingLevel:{value:function(a){return!!this.handlers[a]}},removeHandler:{value:function(a){return this.isHandlingLevel(a)&&delete this.handlers[a],this}},handle:{value:function(a,b,c){return this.handlers[a]&&this.handlers[a].handle(this.name,a,b,c),this}},log:{value:function(a,b){return this.handle(this.LOG,a,b),this}},debug:{value:function(a,b){return this.handle(this.DEBUG,a,b),this}},error:{value:function(a,b){return this.handle(this.ERROR,a,b),this}},info:{value:function(a,b){return this.handle(this.INFO,a,b),this}},lock:{value:function(){return Object.seal(this.handlers),this}}});