/*! sy#1.1.0 - 2014-12-20 */
function namespace(a){var b=null,c=this;if("string"==typeof a)b=a.split(".");else{if(!(a instanceof Array&&a.length>0))return c;b=a}return c[b[0]]=c[b[0]]||{},a=b.shift(),namespace.call(c[a],b)}function objectSetter(a,b){var c="",d="",e=this,f=a.lastIndexOf(".");f>=0?(d=a.substr(f+1),c=a.substr(0,f),e=namespace.call(e,c)):d=a,e[d]=b}function objectGetter(a){var b=null,c=this;if("string"==typeof a){if(b=a.split("."),1===b.length)return c[a]}else{if(!(a instanceof Array&&a.length>1))return a instanceof Array&&1===a.length?c[a[0]]:void 0;b=a}return a=b.shift(),objectGetter.call(c[a],b)}function capitalize(a){return a.substr(0,1).toUpperCase()+a.substr(1)}function reflectedObjectGetter(a){var b=null,c=this;if("string"==typeof a){if(b=a.split("."),1===b.length)return getReflectedValue.call(c,a)}else{if(!(a instanceof Array&&a.length>1))return a instanceof Array&&1===a.length?getReflectedValue.call(c,a[0]):void 0;b=a}return a=b.shift(),reflectedObjectGetter.call(getReflectedValue.call(c,a),b)}function getReflectedValue(a){var b=new ReflectionObject(this);return b.hasMethod("get"+capitalize(a))?b.getMethod("get"+capitalize(a)).call():b.hasMethod("get")?b.getMethod("get").call(a):b.hasProperty(a)?b.getProperty(a).getValue():void 0}namespace("Sy"),Sy.FactoryInterface=function(){},Sy.FactoryInterface.prototype=Object.create(Object.prototype,{make:{value:function(){}}}),namespace("Sy"),Sy.RegistryInterface=function(){},Sy.RegistryInterface.prototype=Object.create(Object.prototype,{set:{value:function(){}},has:{value:function(){}},get:{value:function(){}},getMapping:{value:function(){}},remove:{value:function(){}},length:{value:function(){}}}),namespace("Sy"),Sy.Registry=function(){this.data={},this.registryLength=0},Sy.Registry.prototype=Object.create(Sy.RegistryInterface.prototype,{set:{value:function(a,b){return"string"==typeof a&&(this.data[a]=b,this.registryLength++),this}},has:{value:function(a){return this.data.hasOwnProperty(a)?!0:!1}},get:{value:function(a){if(this.has(a))return this.data[a];if(void 0===a){var b=[];for(var c in this.data)this.data.hasOwnProperty(c)&&b.push(this.data[c]);return b}throw new ReferenceError('"'+a+'" is not defined')}},getMapping:{value:function(){var a={};for(var b in this.data)this.data.hasOwnProperty(b)&&(a[b]=this.data[b]);return a}},remove:{value:function(a){if(void 0===a)for(var b in this.data)this.data.hasOwnProperty(b)&&this.remove(b);else if(a instanceof Array)for(var c=0,d=a.length;d>c;c++)this.remove(a[c]);else"string"==typeof a&&this.has(a)&&(delete this.data[a],this.registryLength--);return this}},length:{value:function(){return this.registryLength}}}),namespace("Sy"),Sy.RegistryFactory=function(){},Sy.RegistryFactory.prototype=Object.create(Sy.FactoryInterface.prototype,{make:{value:function(){return new Sy.Registry}}}),namespace("Sy.Validator"),Sy.Validator.ConstraintInterface=function(){},Sy.Validator.ConstraintInterface.prototype=Object.create(Object.prototype,{hasGroup:{value:function(){}},validateBy:{value:function(){}}}),namespace("Sy.Validator"),Sy.Validator.ConstraintValidatorInterface=function(){},Sy.Validator.ConstraintValidatorInterface.prototype=Object.create(Object.prototype,{setContext:{value:function(){}},validate:{value:function(){}}}),namespace("Sy.Validator"),Sy.Validator.Core=function(){this.rules=null,this.contextFactory=null,this.constraintFactory=null,this.useReflection=!0},Sy.Validator.Core.prototype=Object.create(Object.prototype,{setRulesRegistry:{value:function(a){if(!(a instanceof Sy.RegistryInterface))throw new TypeError("Invalid registry");return this.rules=a,this}},setContextFactory:{value:function(a){if(!(a instanceof Sy.Validator.ExecutionContextFactory))throw new TypeError("Invalid context factory");return this.contextFactory=a,this}},setConstraintFactory:{value:function(a){if(!(a instanceof Sy.Validator.ConstraintFactory))throw new TypeError("Invalid constraint factory");return this.constraintFactory=a,this}},enableReflection:{value:function(){return this.useReflection=!0,this}},disableReflection:{value:function(){return this.useReflection=!1,this}},registerRules:{value:function(a){for(var b in a)a.hasOwnProperty(b)&&this.registerRule(b,a[b]);return this}},registerRule:{value:function(a,b){if(this.rules.has(a))throw new ReferenceError('Rules are already defined for the path "'+a+'"');return void 0===b.getters&&(b.getters={}),void 0===b.properties&&(b.properties={}),this.rules.set(a,b),this}},validateValue:{value:function(a,b,c){c=c||[],b instanceof Array||(b=[b]),c instanceof Array||(c=[c]);for(var d=this.contextFactory.make(),e=0,f=b.length;f>e;e++)d.validate(a,b[e],c);return d.getViolations()}},validate:{value:function(a,b){var c,d,e,f,g=this.resolve(a),h=this.contextFactory.make();b=b||[],b instanceof Array||(b=[b]),h.setObject(a);for(var i in g.getters)if(g.getters.hasOwnProperty(i)){h.setPath(i);for(c in g.getters[i])g.getters[i].hasOwnProperty(c)&&h.validate(a[i](),this.constraintFactory.make(c,g.getters[i][c]),b)}for(var j in g.properties)if(g.properties.hasOwnProperty(j)){h.setPath(j),this.useReflection?(e=new ReflectionObject(a),f="get"+j.charAt(0).toUpperCase()+j.substr(1),d=e.hasMethod(f)?e.getMethod(f).call():e.hasMethod("get")?e.getMethod("get").call(j):e.getProperty(j).getValue()):d=a[j];for(c in g.properties[j])g.properties[j].hasOwnProperty(c)&&h.validate(d,this.constraintFactory.make(c,g.properties[j][c]),b)}return h.getViolations()}},resolve:{value:function(a){var b,c=this.rules.getMapping();for(var d in c)if(c.hasOwnProperty(d)&&(b=objectGetter(d),b&&a instanceof b))return c[d];throw new ReferenceError("No rules defined for the specified object")}}}),namespace("Sy.Validator"),Sy.Validator.AbstractConstraint=function(a){Sy.Validator.ConstraintInterface.call(this,a),this.groups=a.groups instanceof Array?a.groups:[]},Sy.Validator.AbstractConstraint.prototype=Object.create(Sy.Validator.ConstraintInterface.prototype,{hasGroup:{value:function(a){return this.groups instanceof Array&&-1!==this.groups.indexOf(a)}}}),namespace("Sy.Validator"),Sy.Validator.AbstractConstraintValidator=function(){this.context=null},Sy.Validator.AbstractConstraintValidator.prototype=Object.create(Sy.Validator.ConstraintValidatorInterface.prototype,{setContext:{value:function(a){return this.context=a,this}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.Blank=function(a){a=a||{},Sy.Validator.AbstractConstraint.call(this,a),this.message=a.message||"This value must be blank"},Sy.Validator.Constraint.Blank.prototype=Object.create(Sy.Validator.AbstractConstraint.prototype,{validatedBy:{value:function(){return"Sy.Validator.Constraint.BlankValidator"}},getMessage:{value:function(){return this.message}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.BlankValidator=function(){Sy.Validator.AbstractConstraintValidator.call(this)},Sy.Validator.Constraint.BlankValidator.prototype=Object.create(Sy.Validator.AbstractConstraintValidator.prototype,{validate:{value:function(a,b){if(!(b instanceof Sy.Validator.Constraint.Blank))throw new TypeError("Invalid constraint");"string"==typeof a&&0!==a.length&&null!==a&&this.context.addViolation(b.getMessage())}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.Callback=function(a){if(a=a||{},Sy.Validator.AbstractConstraint.call(this,a),void 0===a.callback)throw new ReferenceError("Undefined constraint callback");this.callback=a.callback},Sy.Validator.Constraint.Callback.prototype=Object.create(Sy.Validator.AbstractConstraint.prototype,{validatedBy:{value:function(){return"Sy.Validator.Constraint.CallbackValidator"}},getCallback:{value:function(){return this.callback}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.CallbackValidator=function(){Sy.Validator.AbstractConstraintValidator.call(this)},Sy.Validator.Constraint.CallbackValidator.prototype=Object.create(Sy.Validator.AbstractConstraintValidator.prototype,{validate:{value:function(a,b){if(!(b instanceof Sy.Validator.Constraint.Callback))throw new TypeError("Invalid constraint");var c=b.getCallback();this.context.getObject()[c](this.context)}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.Choice=function(a){a=a||{},Sy.Validator.AbstractConstraint.call(this,a),this.choices=a.choices||[],this.multiple=!!a.multiple,this.min=parseInt(a.min,10),this.max=parseInt(a.max,10),this.message=a.message||"The value you selected is not a valid choice",this.multipleMessage=a.multipleMessage||"One or more of the given values is invalid",this.minMessage=a.minMessage||"You must select more choices",this.maxMessage=a.maxMessage||"You have selected too many choices",this.callback=a.callback},Sy.Validator.Constraint.Choice.prototype=Object.create(Sy.Validator.AbstractConstraint.prototype,{validatedBy:{value:function(){return"Sy.Validator.Constraint.ChoiceValidator"}},getChoices:{value:function(){return this.choices}},hasCallback:{value:function(){return!!this.callback}},getCallback:{value:function(){return this.callback}},isMultiple:{value:function(){return this.multiple}},hasMin:{value:function(){return!isNaN(this.min)}},getMin:{value:function(){return this.min}},hasMax:{value:function(){return!isNaN(this.max)}},getMax:{value:function(){return this.max}},getMessage:{value:function(){return this.message}},getMultipleMessage:{value:function(){return this.multipleMessage}},getMinMessage:{value:function(){return this.minMessage}},getMaxMessage:{value:function(){return this.maxMessage}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.ChoiceValidator=function(){Sy.Validator.AbstractConstraintValidator.call(this)},Sy.Validator.Constraint.ChoiceValidator.prototype=Object.create(Sy.Validator.AbstractConstraintValidator.prototype,{validate:{value:function(a,b){if(!(b instanceof Sy.Validator.Constraint.Choice))throw new TypeError("Invalid constraint");if(b.isMultiple()&&!(a instanceof Array))throw new TypeError("Array expected");var c;if(b.hasCallback()){var d=b.getCallback();c=this.context.getObject()[d]()}else c=b.getChoices();if(b.isMultiple()){for(var e=0,f=a.length;f>e;e++)-1===c.indexOf(a[e])&&this.context.addViolation(b.getMultipleMessage());b.hasMin()&&a.length<b.getMin()&&this.context.addViolation(b.getMinMessage()),b.hasMax()&&a.length>b.getMax()&&this.context.addViolation(b.getMaxMessage())}else-1===c.indexOf(a)&&this.context.addViolation(b.getMessage())}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.Country=function(a){a=a||{},Sy.Validator.AbstractConstraint.call(this,a),this.message=a.message||"This value is not a valid country"},Sy.Validator.Constraint.Country.prototype=Object.create(Sy.Validator.AbstractConstraint.prototype,{validatedBy:{value:function(){return"Sy.Validator.Constraint.CountryValidator"}},getMessage:{value:function(){return this.message}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.CountryValidator=function(){Sy.Validator.AbstractConstraintValidator.call(this)},Sy.Validator.Constraint.CountryValidator.prototype=Object.create(Sy.Validator.AbstractConstraintValidator.prototype,{validate:{value:function(a,b){if(!(b instanceof Sy.Validator.Constraint.Country))throw new TypeError("Invalid constraint");0===Intl.Collator.supportedLocalesOf(a).length&&this.context.addViolation(b.getMessage())}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.Date=function(a){a=a||{},Sy.Validator.AbstractConstraint.call(this,a),this.message=a.message||"The value is not a valid date"},Sy.Validator.Constraint.Date.prototype=Object.create(Sy.Validator.AbstractConstraint.prototype,{validatedBy:{value:function(){return"Sy.Validator.Constraint.DateValidator"}},getMessage:{value:function(){return this.message}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.DateValidator=function(){Sy.Validator.AbstractConstraintValidator.call(this)},Sy.Validator.Constraint.DateValidator.prototype=Object.create(Sy.Validator.AbstractConstraintValidator.prototype,{validate:{value:function(a,b){if(!(b instanceof Sy.Validator.Constraint.Date))throw new TypeError("Invalid constraint");-1===["",null,void 0].indexOf(a)&&("string"==typeof a?"Invalid Date"===new Date(a).toDateString()&&this.context.addViolation(b.getMessage()):a instanceof Date||this.context.addViolation(b.getMessage()))}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.Email=function(a){a=a||{},Sy.Validator.AbstractConstraint.call(this,a),this.message=a.message||"The value is not a valid email"},Sy.Validator.Constraint.Email.prototype=Object.create(Sy.Validator.AbstractConstraint.prototype,{validatedBy:{value:function(){return"Sy.Validator.Constraint.EmailValidator"}},getMessage:{value:function(){return this.message}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.EmailValidator=function(){Sy.Validator.AbstractConstraintValidator.call(this)},Sy.Validator.Constraint.EmailValidator.prototype=Object.create(Sy.Validator.AbstractConstraintValidator.prototype,{validate:{value:function(a,b){if(!(b instanceof Sy.Validator.Constraint.Email))throw new TypeError("Invalid constraint");if(-1===["",null,void 0].indexOf(a)){var c=new RegExp(/^[a-z\.\-\_]+@[a-z\.\-\_]+\.[a-z]{2,}$/i);c.test(a)||this.context.addViolation(b.getMessage())}}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.EqualTo=function(a){a=a||{},Sy.Validator.AbstractConstraint.call(this,a),this.value=a.value,this.message=a.message||"The value should be equal to "+a.value},Sy.Validator.Constraint.EqualTo.prototype=Object.create(Sy.Validator.AbstractConstraint.prototype,{validatedBy:{value:function(){return"Sy.Validator.Constraint.EqualToValidator"}},getValue:{value:function(){return this.value}},getMessage:{value:function(){return this.message}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.EqualToValidator=function(){Sy.Validator.AbstractConstraintValidator.call(this)},Sy.Validator.Constraint.EqualToValidator.prototype=Object.create(Sy.Validator.AbstractConstraintValidator.prototype,{validate:{value:function(a,b){if(!(b instanceof Sy.Validator.Constraint.EqualTo))throw new TypeError("Invalid constraint");a!==b.getValue()&&this.context.addViolation(b.getMessage())}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.False=function(a){a=a||{},Sy.Validator.AbstractConstraint.call(this,a),this.message=a.message||"The value must be false"},Sy.Validator.Constraint.False.prototype=Object.create(Sy.Validator.AbstractConstraint.prototype,{validatedBy:{value:function(){return"Sy.Validator.Constraint.FalseValidator"}},getMessage:{value:function(){return this.message}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.FalseValidator=function(){Sy.Validator.AbstractConstraintValidator.call(this)},Sy.Validator.Constraint.FalseValidator.prototype=Object.create(Sy.Validator.AbstractConstraintValidator.prototype,{validate:{value:function(a,b){if(!(b instanceof Sy.Validator.Constraint.False))throw new TypeError("Invalid constraint");a!==!1&&this.context.addViolation(b.getMessage())}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.GreaterThan=function(a){a=a||{},Sy.Validator.AbstractConstraint.call(this,a),this.value=a.value,this.message=a.message||'The value must be greater than "'+a.value+'"'},Sy.Validator.Constraint.GreaterThan.prototype=Object.create(Sy.Validator.AbstractConstraint.prototype,{validatedBy:{value:function(){return"Sy.Validator.Constraint.GreaterThanValidator"}},getValue:{value:function(){return this.value}},getMessage:{value:function(){return this.message}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.GreaterThanValidator=function(){Sy.Validator.AbstractConstraintValidator.call(this)},Sy.Validator.Constraint.GreaterThanValidator.prototype=Object.create(Sy.Validator.AbstractConstraintValidator.prototype,{validate:{value:function(a,b){if(!(b instanceof Sy.Validator.Constraint.GreaterThan))throw new TypeError("Invalid constraint");a<=b.getValue()&&this.context.addViolation(b.getMessage())}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.GreaterThanOrEqual=function(a){a=a||{},Sy.Validator.AbstractConstraint.call(this,a),this.value=a.value,this.message=a.message||'The value must be greater than or equal to "'+a.value+'"'},Sy.Validator.Constraint.GreaterThanOrEqual.prototype=Object.create(Sy.Validator.AbstractConstraint.prototype,{validatedBy:{value:function(){return"Sy.Validator.Constraint.GreaterThanOrEqualValidator"}},getValue:{value:function(){return this.value}},getMessage:{value:function(){return this.message}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.GreaterThanOrEqualValidator=function(){Sy.Validator.AbstractConstraintValidator.call(this)},Sy.Validator.Constraint.GreaterThanOrEqualValidator.prototype=Object.create(Sy.Validator.AbstractConstraintValidator.prototype,{validate:{value:function(a,b){if(!(b instanceof Sy.Validator.Constraint.GreaterThanOrEqual))throw new TypeError("Invalid constraint");a<b.getValue()&&this.context.addViolation(b.getMessage())}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.Ip=function(a){a=a||{},Sy.Validator.AbstractConstraint.call(this,a),this.port=!!a.port,this.mask=!!a.mask,this.message=a.message||"The value is not a valid IP address"},Sy.Validator.Constraint.Ip.prototype=Object.create(Sy.Validator.AbstractConstraint.prototype,{validatedBy:{value:function(){return"Sy.Validator.Constraint.IpValidator"}},hasPort:{value:function(){return this.port}},hasMask:{value:function(){return this.mask}},getMessage:{value:function(){return this.message}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.IpValidator=function(){Sy.Validator.AbstractConstraintValidator.call(this)},Sy.Validator.Constraint.IpValidator.prototype=Object.create(Sy.Validator.AbstractConstraintValidator.prototype,{validate:{value:function(a,b){if(!(b instanceof Sy.Validator.Constraint.Ip))throw new TypeError("Invalid constraint");var c=":[0-9]{1,6}",d="\\/(?:[12][0-9]|3[0-2]|[0-9])",e="^(?:[01]?[0-9]?[0-9].|2[0-4][0-9].|25[0-5].){3}(?:[01]?[0-9]?[0-9]|2[0-4][0-9]|25[0-5]){1}";b.hasPort()&&(e+=c),b.hasMask()&&(e+=d),e=new RegExp(e+"$"),e.test(a)||this.context.addViolation(b.getMessage())}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.Length=function(a){a=a||{},Sy.Validator.AbstractConstraint.call(this,a),this.min=a.min,this.max=a.max,this.minMessage=a.minMessage||"The value is too short",this.maxMessage=a.maxMessage||"The value is too long",this.exactMessage=a.exactMessage||"The value must be "+this.min+" long"},Sy.Validator.Constraint.Length.prototype=Object.create(Sy.Validator.AbstractConstraint.prototype,{validatedBy:{value:function(){return"Sy.Validator.Constraint.LengthValidator"}},getMin:{value:function(){return this.min}},getMax:{value:function(){return this.max}},getMinMessage:{value:function(){return this.minMessage}},getMaxMessage:{value:function(){return this.maxMessage}},getExactMessage:{value:function(){return this.exactMessage}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.LengthValidator=function(){Sy.Validator.AbstractConstraintValidator.call(this)},Sy.Validator.Constraint.LengthValidator.prototype=Object.create(Sy.Validator.AbstractConstraintValidator.prototype,{validate:{value:function(a,b){if(!(b instanceof Sy.Validator.Constraint.Length))throw new TypeError("Invalid constraint");if(-1===["",null,void 0].indexOf(a)){if(void 0===a.length)throw new TypeError("The value has no length attribute");b.getMin()===b.getMax()&&a.length!==b.getMin()?this.context.addViolation(b.getExactMessage()):(a.length<b.getMin()&&this.context.addViolation(b.getMinMessage()),a.length>b.getMax()&&this.context.addViolation(b.getMaxMessage()))}}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.LessThan=function(a){a=a||{},Sy.Validator.AbstractConstraint.call(this,a),this.value=a.value,this.message=a.message||'The value must be less than "'+a.value+'"'},Sy.Validator.Constraint.LessThan.prototype=Object.create(Sy.Validator.AbstractConstraint.prototype,{validatedBy:{value:function(){return"Sy.Validator.Constraint.LessThanValidator"}},getValue:{value:function(){return this.value}},getMessage:{value:function(){return this.message}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.LessThanValidator=function(){Sy.Validator.AbstractConstraintValidator.call(this)},Sy.Validator.Constraint.LessThanValidator.prototype=Object.create(Sy.Validator.AbstractConstraintValidator.prototype,{validate:{value:function(a,b){if(!(b instanceof Sy.Validator.Constraint.LessThan))throw new TypeError("Invalid constraint");a>=b.getValue()&&this.context.addViolation(b.getMessage())}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.LessThanOrEqual=function(a){a=a||{},Sy.Validator.AbstractConstraint.call(this,a),this.value=a.value,this.message=a.message||'The value must be less than or equal to "'+a.value+'"'},Sy.Validator.Constraint.LessThanOrEqual.prototype=Object.create(Sy.Validator.AbstractConstraint.prototype,{validatedBy:{value:function(){return"Sy.Validator.Constraint.LessThanOrEqualValidator"}},getValue:{value:function(){return this.value}},getMessage:{value:function(){return this.message}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.LessThanOrEqualValidator=function(){Sy.Validator.AbstractConstraintValidator.call(this)},Sy.Validator.Constraint.LessThanOrEqualValidator.prototype=Object.create(Sy.Validator.AbstractConstraintValidator.prototype,{validate:{value:function(a,b){if(!(b instanceof Sy.Validator.Constraint.LessThanOrEqual))throw new TypeError("Invalid constraint");a>b.getValue()&&this.context.addViolation(b.getMessage())}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.NotBlank=function(a){a=a||{},Sy.Validator.AbstractConstraint.call(this,a),this.message=a.message||"This value must not be blank"},Sy.Validator.Constraint.NotBlank.prototype=Object.create(Sy.Validator.AbstractConstraint.prototype,{validatedBy:{value:function(){return"Sy.Validator.Constraint.NotBlankValidator"}},getMessage:{value:function(){return this.message}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.NotBlankValidator=function(){Sy.Validator.AbstractConstraintValidator.call(this)},Sy.Validator.Constraint.NotBlankValidator.prototype=Object.create(Sy.Validator.AbstractConstraintValidator.prototype,{validate:{value:function(a,b){if(!(b instanceof Sy.Validator.Constraint.NotBlank))throw new TypeError("Invalid constraint");("string"==typeof a&&0===a.length||null===a)&&this.context.addViolation(b.getMessage())}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.NotEqualTo=function(a){a=a||{},Sy.Validator.AbstractConstraint.call(this,a),this.value=a.value,this.message=a.message||"The value must not be equal to "+a.value},Sy.Validator.Constraint.NotEqualTo.prototype=Object.create(Sy.Validator.AbstractConstraint.prototype,{validatedBy:{value:function(){return"Sy.Validator.Constraint.NotEqualToValidator"}},getValue:{value:function(){return this.value}},getMessage:{value:function(){return this.message}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.NotEqualToValidator=function(){Sy.Validator.AbstractConstraintValidator.call(this)},Sy.Validator.Constraint.NotEqualToValidator.prototype=Object.create(Sy.Validator.AbstractConstraintValidator.prototype,{validate:{value:function(a,b){if(!(b instanceof Sy.Validator.Constraint.NotEqualTo))throw new TypeError("Invalid constraint");a===b.getValue()&&this.context.addViolation(b.getMessage())}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.NotNull=function(a){a=a||{},Sy.Validator.AbstractConstraint.call(this,a),this.message=a.message||"The value must not be null"},Sy.Validator.Constraint.NotNull.prototype=Object.create(Sy.Validator.AbstractConstraint.prototype,{validatedBy:{value:function(){return"Sy.Validator.Constraint.NotNullValidator"}},getMessage:{value:function(){return this.message}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.NotNullValidator=function(){Sy.Validator.AbstractConstraintValidator.call(this)},Sy.Validator.Constraint.NotNullValidator.prototype=Object.create(Sy.Validator.AbstractConstraintValidator.prototype,{validate:{value:function(a,b){if(!(b instanceof Sy.Validator.Constraint.NotNull))throw new TypeError("Invalid constraint");null===a&&this.context.addViolation(b.getMessage())}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.NotUndefined=function(a){a=a||{},Sy.Validator.AbstractConstraint.call(this,a),this.message=a.message||"The value must not be undefined"},Sy.Validator.Constraint.NotUndefined.prototype=Object.create(Sy.Validator.AbstractConstraint.prototype,{validatedBy:{value:function(){return"Sy.Validator.Constraint.NotUndefinedValidator"}},getMessage:{value:function(){return this.message}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.NotUndefinedValidator=function(){Sy.Validator.AbstractConstraintValidator.call(this)},Sy.Validator.Constraint.NotUndefinedValidator.prototype=Object.create(Sy.Validator.AbstractConstraintValidator.prototype,{validate:{value:function(a,b){if(!(b instanceof Sy.Validator.Constraint.NotUndefined))throw new TypeError("Invalid constraint");void 0===a&&this.context.addViolation(b.getMessage())}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.Null=function(a){a=a||{},Sy.Validator.AbstractConstraint.call(this,a),this.message=a.message||"The value must be null"},Sy.Validator.Constraint.Null.prototype=Object.create(Sy.Validator.AbstractConstraint.prototype,{validatedBy:{value:function(){return"Sy.Validator.Constraint.NullValidator"}},getMessage:{value:function(){return this.message}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.NullValidator=function(){Sy.Validator.AbstractConstraintValidator.call(this)},Sy.Validator.Constraint.NullValidator.prototype=Object.create(Sy.Validator.AbstractConstraintValidator.prototype,{validate:{value:function(a,b){if(!(b instanceof Sy.Validator.Constraint.Null))throw new TypeError("Invalid constraint");null!==a&&this.context.addViolation(b.getMessage())}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.Range=function(a){a=a||{},Sy.Validator.AbstractConstraint.call(this,a),this.min=a.min,this.max=a.max,this.minMessage=a.minMessage||"The value is below the lower bound",this.maxMessage=a.maxMessage||"The value is above the upper bound"},Sy.Validator.Constraint.Range.prototype=Object.create(Sy.Validator.AbstractConstraint.prototype,{validatedBy:{value:function(){return"Sy.Validator.Constraint.RangeValidator"}},getMin:{value:function(){return this.min}},getMax:{value:function(){return this.max}},getMinMessage:{value:function(){return this.minMessage}},getMaxMessage:{value:function(){return this.maxMessage}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.RangeValidator=function(){Sy.Validator.AbstractConstraintValidator.call(this)},Sy.Validator.Constraint.RangeValidator.prototype=Object.create(Sy.Validator.AbstractConstraintValidator.prototype,{validate:{value:function(a,b){if(!(b instanceof Sy.Validator.Constraint.Range))throw new TypeError("Invalid constraint");if("number"!=typeof a||isNaN(a))throw new TypeError("The value is not a numer");a<b.getMin()&&this.context.addViolation(b.getMinMessage()),a>b.getMax()&&this.context.addViolation(b.getMaxMessage())}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.Regex=function(a){a=a||{},Sy.Validator.AbstractConstraint.call(this,a),this.pattern=a.pattern,this.flags=a.flags,this.message=a.message||"The value do not match the wished pattern"},Sy.Validator.Constraint.Regex.prototype=Object.create(Sy.Validator.AbstractConstraint.prototype,{validatedBy:{value:function(){return"Sy.Validator.Constraint.RegexValidator"}},getPattern:{value:function(){return this.pattern}},getFlags:{value:function(){return this.flags}},getMessage:{value:function(){return this.message}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.RegexValidator=function(){Sy.Validator.AbstractConstraintValidator.call(this)},Sy.Validator.Constraint.RegexValidator.prototype=Object.create(Sy.Validator.AbstractConstraintValidator.prototype,{validate:{value:function(a,b){if(!(b instanceof Sy.Validator.Constraint.Regex))throw new TypeError("Invalid constraint");try{var c=new RegExp(b.getPattern(),b.getFlags());c.test(a)||this.context.addViolation(b.getMessage())}catch(d){this.context.addViolation(b.getMessage())}}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.True=function(a){a=a||{},Sy.Validator.AbstractConstraint.call(this,a),this.message=a.message||"The value must be true"},Sy.Validator.Constraint.True.prototype=Object.create(Sy.Validator.AbstractConstraint.prototype,{validatedBy:{value:function(){return"Sy.Validator.Constraint.TrueValidator"}},getMessage:{value:function(){return this.message}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.TrueValidator=function(){Sy.Validator.AbstractConstraintValidator.call(this)},Sy.Validator.Constraint.TrueValidator.prototype=Object.create(Sy.Validator.AbstractConstraintValidator.prototype,{validate:{value:function(a,b){if(!(b instanceof Sy.Validator.Constraint.True))throw new TypeError("Invalid constraint");a!==!0&&this.context.addViolation(b.getMessage())}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.Type=function(a){a=a||{},Sy.Validator.AbstractConstraint.call(this,a),this.type=a.type,this.message=a.message||"The value differs from the specified type"},Sy.Validator.Constraint.Type.prototype=Object.create(Sy.Validator.AbstractConstraint.prototype,{validatedBy:{value:function(){return"Sy.Validator.Constraint.TypeValidator"}},getType:{value:function(){return this.type}},getMessage:{value:function(){return this.message}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.TypeValidator=function(){Sy.Validator.AbstractConstraintValidator.call(this)},Sy.Validator.Constraint.TypeValidator.prototype=Object.create(Sy.Validator.AbstractConstraintValidator.prototype,{validate:{value:function(a,b){if(!(b instanceof Sy.Validator.Constraint.Type))throw new TypeError("Invalid constraint");var c=b.getType(),d=objectGetter(c)||function(){};typeof a===c||a instanceof d||this.context.addViolation(b.getMessage())}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.Undefined=function(a){a=a||{},Sy.Validator.AbstractConstraint.call(this,a),this.message=a.message||"The value must be undefined"},Sy.Validator.Constraint.Undefined.prototype=Object.create(Sy.Validator.AbstractConstraint.prototype,{validatedBy:{value:function(){return"Sy.Validator.Constraint.UndefinedValidator"}},getMessage:{value:function(){return this.message}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.UndefinedValidator=function(){Sy.Validator.AbstractConstraintValidator.call(this)},Sy.Validator.Constraint.UndefinedValidator.prototype=Object.create(Sy.Validator.AbstractConstraintValidator.prototype,{validate:{value:function(a,b){if(!(b instanceof Sy.Validator.Constraint.Undefined))throw new TypeError("Invalid constraint");void 0!==a&&this.context.addViolation(b.getMessage())}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.Url=function(a){a=a||{},Sy.Validator.AbstractConstraint.call(this,a),this.protocols=a.protocols instanceof Array?a.protocols:["http","https"],this.message=a.message||"The value is not a valid url"},Sy.Validator.Constraint.Url.prototype=Object.create(Sy.Validator.AbstractConstraint.prototype,{validatedBy:{value:function(){return"Sy.Validator.Constraint.UrlValidator"}},getProtocols:{value:function(){return this.protocols}},getMessage:{value:function(){return this.message}}}),namespace("Sy.Validator.Constraint"),Sy.Validator.Constraint.UrlValidator=function(){Sy.Validator.AbstractConstraintValidator.call(this)},Sy.Validator.Constraint.UrlValidator.prototype=Object.create(Sy.Validator.AbstractConstraintValidator.prototype,{validate:{value:function(a,b){if(!(b instanceof Sy.Validator.Constraint.Url))throw new TypeError("Invalid constraint");
if(-1===["",null,void 0].indexOf(a)){var c=b.getProtocols().join("|"),d=new RegExp("^("+c+")://[a-z-_.]+(?:.[a-z]{2,})?.*$","i");d.test(a)||this.context.addViolation(b.getMessage())}}}}),namespace("Sy.Validator"),Sy.Validator.ConstraintFactory=function(){},Sy.Validator.ConstraintFactory.prototype=Object.create(Sy.FactoryInterface.prototype,{make:{value:function(a,b){var c,d=Sy.Validator.Constraint[a];if(void 0===d)throw new ReferenceError('The constraint "'+a+'" is undefined');if(c=new d(b),!(c instanceof Sy.Validator.ConstraintInterface))throw new TypeError('"'+a+'" is not a valid constraint');return c}}}),namespace("Sy.Validator"),Sy.Validator.ConstraintValidatorFactory=function(){this.validators={}},Sy.Validator.ConstraintValidatorFactory.prototype=Object.create(Sy.FactoryInterface.prototype,{make:{value:function(a){if(!(a instanceof Sy.Validator.ConstraintInterface))throw new TypeError("Invalid constraint");var b,c=a.validatedBy();if(void 0===this.validators[c]){if(b=objectGetter(c),void 0===b)throw new ReferenceError('Undefined validator "'+c+'"');this.validators[c]=new b}return this.validators[c]}}}),namespace("Sy.Validator"),Sy.Validator.ConstraintViolation=function(a){this.message=a.message,this.path=a.path},Sy.Validator.ConstraintViolation.prototype=Object.create(Object.prototype,{toString:{value:function(){return this.message}},getPath:{value:function(){return this.path}},toJSON:{value:function(){return{message:this.message,path:this.path}}}}),namespace("Sy.Validator"),Sy.Validator.ConstraintViolationList=function(){this.violations=[],this.length=0},Sy.Validator.ConstraintViolationList.prototype=Object.create(Object.prototype,{addViolation:{value:function(a){return this.violations.push(new Sy.Validator.ConstraintViolation({message:a})),this.length++,this}},addViolationAt:{value:function(a,b){return this.violations.push(new Sy.Validator.ConstraintViolation({message:b,path:a})),this.length++,this}},forEach:{value:function(a){return this.violations.forEach(a),this}},getViolations:{value:function(){return this.violations}},getViolationsAt:{value:function(a){return this.violations.filter(function(b){return b.getPath()===a}.bind(this))}},toJSON:{value:function(){return this.violations.map(function(a){return a.toJSON()})}}}),namespace("Sy.Validator"),Sy.Validator.ExecutionContext=function(){this.constraintValidatorFactory=null,this.violations=null,this.path=null,this.object=null},Sy.Validator.ExecutionContext.prototype=Object.create(Object.prototype,{setConstraintValidatorFactory:{value:function(a){if(!(a instanceof Sy.Validator.ConstraintValidatorFactory))throw new TypeError("Invalid constraint validator factory");return this.constraintValidatorFactory=a,this}},setViolationList:{value:function(a){if(!(a instanceof Sy.Validator.ConstraintViolationList))throw new TypeError("Invalid constraint violation list");return this.violations=a,this}},getViolations:{value:function(){return this.violations}},setPath:{value:function(a){return this.path=a,this}},setObject:{value:function(a){return this.object=a,this}},getObject:{value:function(){return this.object}},addViolation:{value:function(a){this.path?this.violations.addViolationAt(this.path,a):this.violations.addViolation(a)}},addViolationAt:{value:function(a,b){this.violations.addViolationAt(a,b)}},validate:{value:function(a,b,c){var d=this.constraintValidatorFactory.make(b);if(c instanceof Array&&c.length>0){for(var e=0,f=c.length;f>e;e++)if(b.hasGroup(c[e])){d.setContext(this).validate(a,b);break}}else d.setContext(this).validate(a,b)}}}),namespace("Sy.Validator"),Sy.Validator.ExecutionContextFactory=function(){this.constraintValidatorFactory=null},Sy.Validator.ExecutionContextFactory.prototype=Object.create(Sy.FactoryInterface.prototype,{setConstraintValidatorFactory:{value:function(a){if(!(a instanceof Sy.Validator.ConstraintValidatorFactory))throw new TypeError("Invalid constraint validator factory");return this.constraintValidatorFactory=a,this}},make:{value:function(){var a=new Sy.Validator.ExecutionContext;return a.setConstraintValidatorFactory(this.constraintValidatorFactory).setViolationList(new Sy.Validator.ConstraintViolationList)}}});