/*! sy#1.0.0 - 2014-12-20 */
function namespace(a){var b=null,c=this;if("string"==typeof a)b=a.split(".");else{if(!(a instanceof Array&&a.length>0))return c;b=a}return c[b[0]]=c[b[0]]||{},a=b.shift(),namespace.call(c[a],b)}function objectSetter(a,b){var c="",d="",e=this,f=a.lastIndexOf(".");f>=0?(d=a.substr(f+1),c=a.substr(0,f),e=namespace.call(e,c)):d=a,e[d]=b}function objectGetter(a){var b=null,c=this;if("string"==typeof a){if(b=a.split("."),1===b.length)return c[a]}else{if(!(a instanceof Array&&a.length>1))return a instanceof Array&&1===a.length?c[a[0]]:void 0;b=a}return a=b.shift(),objectGetter.call(c[a],b)}function capitalize(a){return a.substr(0,1).toUpperCase()+a.substr(1)}function reflectedObjectGetter(a){var b=null,c=this;if("string"==typeof a){if(b=a.split("."),1===b.length)return getReflectedValue.call(c,a)}else{if(!(a instanceof Array&&a.length>1))return a instanceof Array&&1===a.length?getReflectedValue.call(c,a[0]):void 0;b=a}return a=b.shift(),reflectedObjectGetter.call(getReflectedValue.call(c,a),b)}function getReflectedValue(a){var b=new ReflectionObject(this);return b.hasMethod("get"+capitalize(a))?b.getMethod("get"+capitalize(a)).call():b.hasMethod("get")?b.getMethod("get").call(a):b.hasProperty(a)?b.getProperty(a).getValue():void 0}namespace("Sy.EventDispatcher"),Sy.EventDispatcher.Event=function(){this.propagationStopped=!1,this.dispatcher=null,this.name=null},Sy.EventDispatcher.Event.prototype=Object.create(Object.prototype,{isPropagationStopped:{value:function(){return this.propagationStopped}},stopPropagation:{value:function(){this.propagationStopped=!0}},setDispatcher:{value:function(a){if(!(a instanceof Sy.EventDispatcher.EventDispatcherInterface))throw new TypeError("Invalid event dispatcher");this.dispatcher=a}},getDispatcher:{value:function(){return this.dispatcher}},setName:{value:function(a){this.name=a}},getName:{value:function(){return this.name}}}),namespace("Sy.EventDispatcher"),Sy.EventDispatcher.EventDispatcherInterface=function(){},Sy.EventDispatcher.EventDispatcherInterface.prototype=Object.create(Object.prototype,{dispatch:{value:function(){}},addListener:{value:function(){}},addSubscriber:{value:function(){}},removeListener:{value:function(){}},removeSubsriber:{value:function(){}},getListeners:{value:function(){}},hasListeners:{value:function(){}}}),namespace("Sy.EventDispatcher"),Sy.EventDispatcher.EventDispatcher=function(){this.listeners={},this.sorted={}},Sy.EventDispatcher.EventDispatcher.prototype=Object.create(Sy.EventDispatcher.EventDispatcherInterface.prototype,{dispatch:{value:function(a,b){if(b||(b=new Sy.EventDispatcher.Event),!(b instanceof Sy.EventDispatcher.Event))throw new TypeError("Invalid event object");return b.setDispatcher(this),b.setName(a),this.hasListeners(a)?(this.doDispatch(this.getListeners(a),a,b),b):b}},doDispatch:{value:function(a,b,c){for(var d=0,e=a.length;e>d&&(a[d](c,b,this),!c.isPropagationStopped());d++);}},addListener:{value:function(a,b,c){if(!(b instanceof Function||b instanceof Array||b[0]instanceof Object||b[1]instanceof Function))throw new TypeError("A listener must be a function");return this.listeners[a]instanceof Array||(this.listeners[a]=[]),this.sorted[a]&&(this.sorted[a]=void 0),this.listeners[a].push({listener:b,priority:c||0}),this}},addSubscriber:{value:function(a){if(!(a instanceof Sy.EventDispatcher.EventSubscriberInterface))throw new TypeError("Invalid event subscriber");var b=a.getSubscribedEvents();for(var c in b)if(b.hasOwnProperty(c))if(b[c]instanceof Array)for(var d=0,e=b[c].length;e>d;d++)this.addListener(c,[a,a[b[c][d].method]],b[c][d].priority);else b[c]instanceof Object?this.addListener(c,[a,a[b[c].method]],b[c].priority):this.addListener(c,a[b[c]]);return this}},removeListener:{value:function(a,b){if(!(b instanceof Function||b instanceof Array||b[0]instanceof Object||b[1]instanceof Function))throw new TypeError("Invalid event listener");if(!this.listeners.hasOwnProperty(a))return this;this.sorted[a]&&(this.sorted[a]=void 0);for(var c=0,d=this.listeners[a].length;d>c;c++)if(b instanceof Array&&this.listeners[a][c].listener[0]===b[0]&&this.listeners[a][c].listener[1]===b[1]||this.listeners[a][c].listener===b){this.listeners[a].splice(c,1);break}return this}},removeSubscriber:{value:function(a){if(!(a instanceof Sy.EventDispatcher.EventSubscriberInterface))throw new TypeError("Invalid event subscriber");var b=a.getSubscribedEvents();for(var c in b)if(b.hasOwnProperty(c))if(b[c]instanceof Array)for(var d=0,e=b[c].length;e>d;d++)this.removeListener(c,[a,a[b[c][d].method]]);else b[c]instanceof Object?this.removeListener(c,[a,a[b[c].method]]):this.removeListener(c,a[b[c]]);return this}},getListeners:{value:function(a){return this.hasListeners(a)?(this.sorted[a]||this.sortListeners(a),this.sorted[a]):[]}},hasListeners:{value:function(a){return!!this.listeners[a]&&!!this.listeners[a].length}},sortListeners:{value:function(a){this.listeners[a].sort(function(a,b){return a.priority<b.priority}),this.sorted[a]=this.listeners[a].map(function(a){return a.listener instanceof Array?a.listener[1].bind(a.listener[0]):a.listener})}}}),namespace("Sy.EventDispatcher"),Sy.EventDispatcher.ImmutableEventDispatcher=function(a){if(!(a instanceof Sy.EventDispatcher.EventDispatcherInterface))throw new TypeError("Invalid event dispatcher");this.dispatcher=a},Sy.EventDispatcher.ImmutableEventDispatcher.prototype=Object.create(Sy.EventDispatcher.EventDispatcherInterface.prototype,{dispatch:{value:function(a,b){return this.dispatcher.dispatch(a,b)}},addListener:{value:function(){throw new Error("Unmodifiable event dispatchers must not be modified")}},addSubscriber:{value:function(){throw new Error("Unmodifiable event dispatchers must not be modified")}},removeListener:{value:function(){throw new Error("Unmodifiable event dispatchers must not be modified")}},removeSubscriber:{value:function(){throw new Error("Unmodifiable event dispatchers must not be modified")}},getListeners:{value:function(a){return this.dispatcher.getListeners(a)}},hasListeners:{value:function(a){return this.dispatcher.hasListeners(a)}}}),namespace("Sy.EventDispatcher"),Sy.EventDispatcher.EventSubscriberInterface=function(){},Sy.EventDispatcher.EventSubscriberInterface.prototype=Object.create(Object.prototype,{getSubscribedEvents:{value:function(){}}}),namespace("Sy.EventDispatcher"),Sy.EventDispatcher.GenericEvent=function(a,b){if(Sy.EventDispatcher.Event.call(this),void 0!==b&&!(b instanceof Object))throw new TypeError("Event arguments must be an object");this.subject=a,this.args=b||{}},Sy.EventDispatcher.GenericEvent.prototype=Object.create(Sy.EventDispatcher.Event.prototype,{getSubject:{value:function(){return this.subject}},getArgument:{value:function(a){return this.args[a]}},setArgument:{value:function(a,b){return this.args[a]=b,this}},getArguments:{value:function(){return this.args}},setArguments:{value:function(a){if(!(a instanceof Object))throw new TypeError("Event arguments must be an object");return this.args=a,this}}});